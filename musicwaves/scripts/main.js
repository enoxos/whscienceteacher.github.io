'use strict';function v(g,a,b,c){g.A.ec(g.Ra,a,b,c,void 0)}function z(g,a,b,c){g.A.Ja?v(g,a,b,c):g.A.bf()._OnMessageFromDOM({type:"event",component:g.Ra,handler:a,dispatchOpts:c||null,data:b,responseId:null})}function A(g,a,b){g.A.B(g.Ra,a,b)}function B(g,a){for(const [b,c]of a)A(g,b,c)}function C(g){g.Kb||(g.A.Ne(g.Td),g.Kb=!0)}window.mb=class{constructor(g,a){this.A=g;this.Ra=a;this.Kb=!1;this.Td=()=>this.xa()}Xc(){}xa(){}};function D(g){-1!==g.Ia&&(self.clearTimeout(g.Ia),g.Ia=-1)}
window.Ee=class{constructor(g,a){this.Cc=g;this.pg=a;this.Ia=-1;this.Lb=-Infinity;this.Ud=()=>{this.Ia=-1;this.Lb=Date.now();this.Wa=!0;this.Cc();this.Wa=!1};this.Dd=this.Wa=!1}c(){D(this);this.Ud=this.Cc=null}};"use strict";function E(g,a){const b=a.elementId,c=g.ad(b,a);g.Y.set(b,c);a.isVisible||(c.style.display="none");c.addEventListener("focus",()=>{F(g,"elem-focused",b)});c.addEventListener("blur",()=>{F(g,"elem-blurred",b)});g.Fb&&document.body.appendChild(c)}
function G(g,a,b){A(g,a,c=>{const f=g.Y.get(c.elementId);return b(f,c)})}function F(g,a,b,c){c||(c={});c.elementId=b;v(g,a,c)}function H(g,a,b){var c;c||(c={});c.elementId=b;z(g,a,c)}
window.ne=class extends self.mb{constructor(g,a){super(g,a);this.Y=new Map;this.Fb=!0;B(this,[["create",b=>E(this,b)],["destroy",b=>{{b=b.elementId;const c=this.Y.get(b);this.Fb&&c.parentElement.removeChild(c);this.Y.delete(b)}}],["set-visible",b=>{this.Fb&&(this.Y.get(b.elementId).style.display=b.isVisible?"":"none")}],["update-position",b=>{if(this.Fb){var c=this.Y.get(b.elementId);c.style.left=b.left+"px";c.style.top=b.top+"px";c.style.width=b.width+"px";c.style.height=b.height+"px";b=b.fontSize;
null!==b&&(c.style.fontSize=b+"em")}}],["update-state",b=>{{const c=this.Y.get(b.elementId);this.lc(c,b)}}],["focus",b=>{{const c=this.Y.get(b.elementId);b.focus?c.focus():c.blur()}}],["set-css-style",b=>{this.Y.get(b.elementId).style[b.prop]=b.val}],["set-attribute",b=>{this.Y.get(b.elementId).setAttribute(b.name,b.val)}],["remove-attribute",b=>{this.Y.get(b.elementId).removeAttribute(b.name)}]]);G(this,"get-element",b=>b)}ad(){throw Error("required override");}lc(){throw Error("required override");
}};"use strict";
{var I=function(q){return l.has(q)},J=function(q){return new Promise((e,k)=>{const m=new FileReader;m.onload=r=>e(r.target.result);m.onerror=r=>k(r);m.readAsArrayBuffer(q)})},K=async function(q){q=await J(q);return(new TextDecoder("utf-8")).decode(q)},L=function(q){if(q.zg){const e=document.createElement("script");e.async=!1;e.textContent=q.Cg;document.head.appendChild(e)}else return new Promise((e,k)=>{const m=document.createElement("script");m.onload=e;m.onerror=k;m.async=!1;m.src=q;document.head.appendChild(m)})};
const g=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent);let a=new Audio;const b={"audio/webm; codecs=opus":!!a.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!a.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!a.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!a.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!a.canPlayType("audio/mp4"),"audio/mpeg":!!a.canPlayType("audio/mpeg")};a=null;const c=[];let f=0;window.RealFile=
window.File;const p=[],t=new Map,d=new Map;let h=0;const n=[];self.Mg=function(q){if("function"!==typeof q)throw Error("runOnStartup called without a function");n.push(q)};const l=new Set(["cordova","playable-ad","instant-games"]);window.Oa=class q{constructor(e){this.Ja=e.Eg;this.ma=null;this.V="";this.Rc=e.Bg;this.kb={};this.Ba=this.jb=null;this.Ib=[];this.Ya=this.I=this.Ga=null;this.Fa=-1;this.ug=()=>this.Af();this.Ea=[];this.W=e.Vd;I(this.W)&&this.Ja&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in WebViews due to crbug.com/923007. Reverting to DOM mode."),
this.Ja=!1);this.Uc=!1;this.Nb=this.ha=null;"html5"!==this.W&&"playable-ad"!==this.W||"file"!==location.protocol.substr(0,4)||alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)");this.B("runtime","cordova-fetch-local-file",k=>this.kf(k));this.B("runtime","create-job-worker",()=>this.lf());"cordova"===this.W?document.addEventListener("deviceready",()=>this.rd(e)):this.rd(e)}c(){this.mc();this.ma&&
(this.ma=this.ma.onmessage=null);this.jb&&(this.jb.terminate(),this.jb=null);this.Ba&&(this.Ba.c(),this.Ba=null);this.I&&(this.I.parentElement.removeChild(this.I),this.I=null)}ed(){return g&&"cordova"===this.W}qb(){return g&&I(this.W)||navigator.standalone}async rd(e){if("playable-ad"===this.W){this.ha=self.c3_base64files;this.Nb={};await this.Se();for(let m=0,r=e.Ka.length;m<r;++m){var k=e.Ka[m].toLowerCase();this.Nb.hasOwnProperty(k)?e.Ka[m]={zg:!0,Cg:this.Nb[k]}:this.ha.hasOwnProperty(k)&&(e.Ka[m]=
URL.createObjectURL(this.ha[k]))}}e.wg?this.V=e.wg:(k=location.origin,this.V=("null"===k?"file:///":k)+location.pathname,k=this.V.lastIndexOf("/"),-1!==k&&(this.V=this.V.substr(0,k+1)));if(e.Gg)for(const [m,r]of Object.entries(e.Gg))this.kb[m]=URL.createObjectURL(r);k=new MessageChannel;this.ma=k.port1;this.ma.onmessage=m=>this._OnMessageFromRuntime(m.data);window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(m=>this.wf(m));this.Ya=new self.Ae(this);await this.Ya.we();this.fd();"object"===
typeof window.StatusBar&&window.StatusBar.hide();"object"===typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode();await this.ig();this.Ja?await this.df(e,k.port2):await this.cf(e,k.port2)}pc(e){return this.kb.hasOwnProperty(e)?this.kb[e]:e.endsWith("/workermain.js")&&this.kb.hasOwnProperty("workermain.js")?this.kb["workermain.js"]:"playable-ad"===this.W&&this.ha.hasOwnProperty(e.toLowerCase())?URL.createObjectURL(this.ha[e.toLowerCase()]):e}async Yb(e,k,m){if(e.startsWith("blob:"))return new Worker(e,
m);if(this.ed()&&"file:"===location.protocol)return e=await this.Xb(this.Rc+e),new Worker(URL.createObjectURL(new Blob([e],{type:"application/javascript"})),m);e=new URL(e,k);if(location.origin!==e.origin){e=await fetch(e);if(!e.ok)throw Error("failed to fetch worker script");e=await e.blob();return new Worker(URL.createObjectURL(e),m)}return new Worker(e,m)}fd(){if(this.qb()){const e=document.documentElement.style,k=document.body.style,m=window.innerWidth<window.innerHeight,r=m?window.screen.width:
window.screen.height;k.height=e.height=(m?window.screen.height:window.screen.width)+"px";k.width=e.width=r+"px"}}qd(e){return{baseUrl:this.V,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:q.dc(),projectData:e.Lg,previewImageBlobs:window.cr_previewImageBlobs||this.ha,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:e.Vd,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.Kg,jobScheduler:this.Ya.ue(),
supportedAudioFormats:b,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.Rc+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.Rc+"opus.wasm.wasm",isiOSCordova:this.ed(),isiOSWebView:this.qb(),isFBInstantAvailable:"undefined"!==typeof self.FBInstant}}async df(e,k){var m=this.pc(e.Fg);this.jb=await this.Yb(m,this.V,{name:"Runtime"});this.I=document.createElement("canvas");this.I.style.display="none";m=this.I.transferControlToOffscreen();document.body.appendChild(this.I);window.c3canvas=
this.I;this.jb.postMessage(Object.assign(this.qd(e),{type:"init-runtime",isInWorker:!0,messagePort:k,canvas:m,workerDependencyScripts:e.Wc||[],engineScripts:e.Ka,projectScripts:window.Jg,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[k,m,...this.Ya.ve()]);this.Ib=p.map(r=>new r(this));this.pd();self.c3_callFunction=(r,u)=>this.Ga.ef(r,u);"preview"===this.W&&(self.goToLastErrorScript=()=>this.ec("runtime","go-to-last-error-script"))}async cf(e,k){this.I=document.createElement("canvas");this.I.style.display=
"none";document.body.appendChild(this.I);window.c3canvas=this.I;this.Ib=p.map(r=>new r(this));this.pd();const m=e.Ka.map(r=>"string"===typeof r?(new URL(r,this.V)).toString():r);Array.isArray(e.Wc)&&m.unshift(...e.Wc);await Promise.all(m.map(r=>L(r)));if(e.Wd&&0<e.Wd.length){const r=self.C3_ProjectScriptsStatus;try{if(await Promise.all(e.Wd.map(u=>L(u[1]))),Object.values(r).some(u=>!u)){self.setTimeout(()=>this.yd(r),100);return}}catch(u){console.error("[Preview] Error loading project scripts: ",
u);self.setTimeout(()=>this.yd(r),100);return}}"preview"===this.W&&"object"!==typeof self.Hg.Ig?(console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.")):(e=Object.assign(this.qd(e),{isInWorker:!1,messagePort:k,canvas:this.I,runOnStartupFunctions:n}),this.Ba=self.C3_CreateRuntime(e),await self.C3_InitRuntime(this.Ba,e))}yd(e){e=
`Failed to load project script '${Object.entries(e).filter(k=>!k[1]).map(k=>k[0])[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+e);alert(e)}async lf(){const e=await this.Ya.od();return{outputPort:e,transferables:[e]}}bf(){if(this.Ja)throw Error("not available in worker mode");return this.Ba}ec(e,k,m,r,u){this.ma.postMessage({type:"event",component:e,handler:k,dispatchOpts:r||null,data:m,responseId:null},this.Uc?void 0:u)}gd(e,k,m,r,u){const x=h++,w=new Promise((y,
V)=>{d.set(x,{resolve:y,reject:V})});this.ma.postMessage({type:"event",component:e,handler:k,dispatchOpts:r||null,data:m,responseId:x},this.Uc?void 0:u);return w}["_OnMessageFromRuntime"](e){const k=e.type;if("event"===k)return this.rf(e);if("result"===k)this.Df(e);else if("runtime-ready"===k)this.Ef();else if("alert"===k)alert(e.message);else throw Error(`unknown message '${k}'`);}rf(e){const k=e.component,m=e.handler,r=e.data,u=e.responseId;if(e=t.get(k))if(e=e.get(m)){var x=null;try{x=e(r)}catch(w){console.error(`Exception in '${k}' handler '${m}':`,
w);null!==u&&this.Ab(u,!1,""+w);return}if(null===u)return x;x&&x.then?x.then(w=>this.Ab(u,!0,w)).catch(w=>{console.error(`Rejection from '${k}' handler '${m}':`,w);this.Ab(u,!1,""+w)}):this.Ab(u,!0,x)}else console.warn(`[DOM] No handler '${m}' for component '${k}'`);else console.warn(`[DOM] No event handlers for component '${k}'`)}Ab(e,k,m){let r;m&&m.transferables&&(r=m.transferables);this.ma.postMessage({type:"result",responseId:e,isOk:k,result:m},r)}Df(e){const k=e.responseId,m=e.isOk;e=e.result;
const r=d.get(k);m?r.resolve(e):r.reject(e);d.delete(k)}B(e,k,m){let r=t.get(e);r||(r=new Map,t.set(e,r));if(r.has(k))throw Error(`[DOM] Component '${e}' already has handler '${k}'`);r.set(k,m)}static lb(e){if(p.includes(e))throw Error("DOM handler already added");p.push(e)}pd(){for(const e of this.Ib)if("runtime"===e.Ra){this.Ga=e;return}throw Error("cannot find runtime DOM handler");}wf(e){this.ec("debugger","message",e)}Ef(){for(const e of this.Ib)e.Xc()}static dc(){return!!(document.fullscreenElement||
document.webkitFullscreenElement||document.mozFullScreenElement)}Ne(e){this.Ea.push(e);this.Ac()}Pf(e){e=this.Ea.indexOf(e);if(-1===e)throw Error("invalid callback");this.Ea.splice(e,1);this.Ea.length||this.mc()}Ac(){-1===this.Fa&&this.Ea.length&&(this.Fa=requestAnimationFrame(this.ug))}mc(){-1!==this.Fa&&(cancelAnimationFrame(this.Fa),this.Fa=-1)}Af(){this.Fa=-1;for(const e of this.Ea)e();this.Ac()}qa(e){this.Ga.qa(e)}wa(e){this.Ga.wa(e)}zc(){this.Ga.zc()}tb(e){this.Ga.tb(e)}ye(){return!!b["audio/webm; codecs=opus"]}async ng(e){e=
await this.gd("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(e)}xe(e){return/^(?:[a-z]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}ze(e){return!this.xe(e)}async kf(e){const k=e.filename;switch(e.as){case "text":return await this.me(k);case "buffer":return await this.Xb(k);default:throw Error("unsupported type");}}$c(e){const k=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((m,r)=>{window.resolveLocalFileSystemURL(k,
u=>{u.file(m,r)},r)})}async me(e){e=await this.$c(e);return await K(e)}nc(){if(c.length&&!(8<=f)){f++;var e=c.shift();this.Te(e.filename,e.Dg,e.yg)}}Xb(e){return new Promise((k,m)=>{c.push({filename:e,Dg:r=>{f--;this.nc();k(r)},yg:r=>{f--;this.nc();m(r)}});this.nc()})}async Te(e,k,m){try{const r=await this.$c(e),u=await J(r);k(u)}catch(r){m(r)}}async Se(){const e=[];for(const [k,m]of Object.entries(this.ha))e.push(this.Re(k,m));await Promise.all(e)}async Re(e,k){if("object"===typeof k)this.ha[e]=
new Blob([k.str],{type:k.type}),this.Nb[e]=k.str;else{let m=await this.$e(k);m||(m=this.Ve(k));this.ha[e]=m}}async $e(e){try{return await (await fetch(e)).blob()}catch(k){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",k),null}}Ve(e){e=this.Jf(e);return this.Qe(e.data,e.Ag)}Jf(e){var k=e.indexOf(",");if(0>k)throw new URIError("expected comma in data: uri");
var m=e.substring(k+1);k=e.substring(5,k).split(";");e=k[0]||"";const r=k[2];m="base64"===k[1]||"base64"===r?atob(m):decodeURIComponent(m);return{Ag:e,data:m}}Qe(e,k){var m=e.length;let r=m>>2,u=new Uint8Array(m),x=new Uint32Array(u.buffer,0,r),w,y;for(y=w=0;w<r;++w)x[w]=e.charCodeAt(y++)|e.charCodeAt(y++)<<8|e.charCodeAt(y++)<<16|e.charCodeAt(y++)<<24;for(m&=3;m--;)u[y]=e.charCodeAt(y),++y;return new Blob([u],{type:k})}ig(){let e=null;const k=new Promise(u=>e=u),m=new ArrayBuffer(1),r=new MessageChannel;
r.port2.onmessage=u=>{u.data&&u.data.arrayBuffer||(this.Uc=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables."));e()};r.port1.postMessage({arrayBuffer:m},[m]);return k}}}"use strict";
{var N=function(){const d=document.activeElement;if(!d)return!1;const h=d.tagName.toLowerCase(),n=new Set("email number password search tel text url".split(" "));return"textarea"===h?!0:"input"===h?n.has(d.type.toLowerCase()||"text"):M(d)},O=function(){try{return window.parent&&window.parent.document.hasFocus()}catch(d){return!1}},P=function(d){(d.metaKey||d.ctrlKey)&&d.preventDefault()},Q=function(d){p.has(d.target.tagName.toLowerCase())&&d.preventDefault()},M=function(d){do{if(d.parentNode&&d.hasAttribute("contenteditable"))return!0;
d=d.parentNode}while(d);return!1},T=async function(d,h,n){if(!/firefox/i.test(navigator.userAgent))return await R(d);var l=await S(d);l=(new DOMParser).parseFromString(l,"image/svg+xml");const q=l.documentElement;if(q.hasAttribute("width")&&q.hasAttribute("height")){const e=q.getAttribute("width"),k=q.getAttribute("height");if(!e.includes("%")&&!k.includes("%"))return await R(d)}q.setAttribute("width",h+"px");q.setAttribute("height",n+"px");l=(new XMLSerializer).serializeToString(l);d=new Blob([l],
{type:"image/svg+xml"});return await R(d)},S=function(d){return new Promise((h,n)=>{let l=new FileReader;l.onload=q=>h(q.target.result);l.onerror=q=>n(q);l.readAsText(d)})},R=async function(d){d=URL.createObjectURL(d);try{return await aa(d)}finally{URL.revokeObjectURL(d)}},aa=function(d){return new Promise((h,n)=>{const l=new Image;l.onload=()=>h(l);l.onerror=q=>n(q);l.src=d})},ba=function(d){return new Promise((h,n)=>{const l=document.createElement("link");l.onload=()=>h(l);l.onerror=q=>n(q);l.rel=
"stylesheet";l.href=d;document.head.appendChild(l)})},U=function(d){return d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents||d.originalEvent&&d.originalEvent.sourceCapabilities&&d.originalEvent.sourceCapabilities.firesTouchEvents};const g=self.Oa,a=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),b={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},c={dispatchUserScriptEvent:!0},f={dispatchRuntimeEvent:!0},p=new Set(["canvas","body","html"]);self.C3_GetSvgImageSize=async function(d){d=
await R(d);if(0<d.width&&0<d.height)return[d.width,d.height];{d.style.position="absolute";d.style.left="0px";d.style.top="0px";d.style.visibility="hidden";document.body.appendChild(d);const h=d.getBoundingClientRect();document.body.removeChild(d);return[h.width,h.height]}};self.C3_RasterSvgImageBlob=async function(d,h,n,l,q){d=await T(d,h,n);const e=document.createElement("canvas");e.width=l;e.height=q;e.getContext("2d").drawImage(d,0,0,h,n);return e};let t=!1;document.addEventListener("pause",()=>
t=!0);document.addEventListener("resume",()=>t=!1);g.lb(class extends self.mb{constructor(d){super(d,"runtime");this.Id=!0;this.Ha=-1;this.Sc="any";this.zd=this.Ad=!1;this.Lc=this.gb=this.sa=null;d.B("canvas","update-size",l=>this.Hf(l));d.B("runtime","invoke-download",l=>this.uf(l));d.B("runtime","raster-svg-image",l=>this.Bf(l));d.B("runtime","get-svg-image-size",l=>this.tf(l));d.B("runtime","set-target-orientation",l=>this.Ff(l));d.B("runtime","register-sw",()=>this.Cf());d.B("runtime","post-to-debugger",
l=>this.ud(l));d.B("runtime","go-to-script",l=>this.ud(l));d.B("runtime","before-start-ticking",()=>this.jf());d.B("runtime","debug-highlight",l=>this.mf(l));d.B("runtime","enable-device-orientation",()=>this.Pe());d.B("runtime","enable-device-motion",()=>this.Oe());d.B("runtime","add-stylesheet",l=>this.gf(l));d.B("runtime","alert",l=>this.hf(l));const h=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",l=>{const q=l.target;h.has(q.tagName.toLowerCase())||M(q)||l.preventDefault()});
const n=d.I;window.addEventListener("selectstart",Q);window.addEventListener("gesturehold",Q);n.addEventListener("selectstart",Q);n.addEventListener("gesturehold",Q);window.addEventListener("touchstart",Q,{passive:!1});"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",Q,{passive:!1}),n.addEventListener("pointerdown",Q)):n.addEventListener("touchstart",Q);this.cb=0;window.addEventListener("mousedown",l=>{1===l.button&&l.preventDefault()});window.addEventListener("mousewheel",
P,{passive:!1});window.addEventListener("wheel",P,{passive:!1});window.addEventListener("resize",()=>this.If());d.qb()&&window.addEventListener("focusout",()=>{N()||(document.scrollingElement.scrollTop=0)});this.Ca=new Set;this.Ob=new WeakSet;this.la=!1}jf(){"cordova"===this.A.W?(document.addEventListener("pause",()=>this.yc(!0)),document.addEventListener("resume",()=>this.yc(!1))):document.addEventListener("visibilitychange",()=>this.yc(document.hidden));return{isSuspended:!(!document.hidden&&!t)}}Xc(){window.addEventListener("focus",
()=>this.Bb("window-focus"));window.addEventListener("blur",()=>{this.Bb("window-blur",{parentHasFocus:O()});this.cb=0});window.addEventListener("fullscreenchange",()=>this.uc());window.addEventListener("webkitfullscreenchange",()=>this.uc());window.addEventListener("mozfullscreenchange",()=>this.uc());window.addEventListener("fullscreenerror",h=>this.vc(h));window.addEventListener("webkitfullscreenerror",h=>this.vc(h));window.addEventListener("mozfullscreenerror",h=>this.vc(h));window.addEventListener("keydown",
h=>this.td("keydown",h));window.addEventListener("keyup",h=>this.td("keyup",h));window.addEventListener("dblclick",h=>this.wc("dblclick",h,b));window.addEventListener("wheel",h=>this.yf(h));"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",h=>{this.qc(h);this.Pa("pointerdown",h)}),this.A.Ja&&"undefined"!==typeof window.onpointerrawupdate&&self===self.top?(this.gb=new self.Ee(()=>this.Ye(),5),this.gb.Dd=!0,window.addEventListener("pointerrawupdate",h=>this.zf(h))):window.addEventListener("pointermove",
h=>this.Pa("pointermove",h)),window.addEventListener("pointerup",h=>this.Pa("pointerup",h)),window.addEventListener("pointercancel",h=>this.Pa("pointercancel",h))):(window.addEventListener("mousedown",h=>{this.qc(h);this.xc("pointerdown",h)}),window.addEventListener("mousemove",h=>this.xc("pointermove",h)),window.addEventListener("mouseup",h=>this.xc("pointerup",h)),window.addEventListener("touchstart",h=>{this.qc(h);this.zb("pointerdown",h)}),window.addEventListener("touchmove",h=>this.zb("pointermove",
h)),window.addEventListener("touchend",h=>this.zb("pointerup",h)),window.addEventListener("touchcancel",h=>this.zb("pointercancel",h)));const d=()=>this.zc();window.addEventListener("pointerup",d,!0);window.addEventListener("touchend",d,!0);window.addEventListener("click",d,!0);window.addEventListener("keydown",d,!0);window.addEventListener("gamepadconnected",d,!0)}Bb(d,h){v(this,d,h||null,f)}xb(){return Math.max(window.innerWidth,1)}wb(){return Math.max(window.innerHeight,1)}If(){const d=this.xb(),
h=this.wb();this.Bb("window-resize",{innerWidth:d,innerHeight:h,devicePixelRatio:window.devicePixelRatio});this.A.qb()&&(-1!==this.Ha&&clearTimeout(this.Ha),this.vd(d,h,0))}Qf(d,h,n){-1!==this.Ha&&clearTimeout(this.Ha);this.Ha=setTimeout(()=>this.vd(d,h,n),48)}vd(d,h,n){const l=this.xb(),q=this.wb();this.Ha=-1;l!=d||q!=h?this.Bb("window-resize",{innerWidth:l,innerHeight:q,devicePixelRatio:window.devicePixelRatio}):10>n&&this.Qf(l,q,n+1)}Ff(d){this.Sc=d.targetOrientation}jg(){const d=this.Sc;if(screen.orientation&&
screen.orientation.lock)screen.orientation.lock(d).catch(h=>console.warn("[Construct 3] Failed to lock orientation: ",h));else try{let h=!1;screen.lockOrientation?h=screen.lockOrientation(d):screen.webkitLockOrientation?h=screen.webkitLockOrientation(d):screen.mozLockOrientation?h=screen.mozLockOrientation(d):screen.msLockOrientation&&(h=screen.msLockOrientation(d));h||console.warn("[Construct 3] Failed to lock orientation")}catch(h){console.warn("[Construct 3] Failed to lock orientation: ",h)}}uc(){const d=
g.dc();d&&"any"!==this.Sc&&this.jg();v(this,"fullscreenchange",{isFullscreen:d,innerWidth:this.xb(),innerHeight:this.wb()})}vc(d){console.warn("[Construct 3] Fullscreen request failed: ",d);v(this,"fullscreenerror",{isFullscreen:g.dc(),innerWidth:this.xb(),innerHeight:this.wb()})}yc(d){d?this.A.mc():this.A.Ac();v(this,"visibilitychange",{hidden:d})}td(d,h){"Backspace"===h.key&&Q(h);const n=a.get(h.code)||h.code;z(this,d,{code:n,key:h.key,which:h.which,repeat:h.repeat,altKey:h.altKey,ctrlKey:h.ctrlKey,
metaKey:h.metaKey,shiftKey:h.shiftKey,timeStamp:h.timeStamp},b)}yf(d){v(this,"wheel",{clientX:d.clientX,clientY:d.clientY,pageX:d.pageX,pageY:d.pageY,deltaX:d.deltaX,deltaY:d.deltaY,deltaZ:d.deltaZ,deltaMode:d.deltaMode,timeStamp:d.timeStamp},b)}wc(d,h,n){U(h)||z(this,d,{button:h.button,buttons:h.buttons,clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,timeStamp:h.timeStamp},n)}xc(d,h){if(!U(h)){var n=this.cb;"pointerdown"===d&&0!==n?d="pointermove":"pointerup"===d&&0!==h.buttons&&
(d="pointermove");z(this,d,{pointerId:1,pointerType:"mouse",button:h.button,buttons:h.buttons,lastButtons:n,clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:h.timeStamp},b);this.cb=h.buttons;this.wc(h.type,h,c)}}Pa(d,h){if(this.gb&&"pointermove"!==d){var n=this.gb;n.Wa||(D(n),n.Lb=Date.now())}n=0;"mouse"===h.pointerType&&(n=this.cb);z(this,d,{pointerId:h.pointerId,pointerType:h.pointerType,button:h.button,
buttons:h.buttons,lastButtons:n,clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,width:h.width||0,height:h.height||0,pressure:h.pressure||0,tangentialPressure:h.tangentialPressure||0,tiltX:h.tiltX||0,tiltY:h.tiltY||0,twist:h.twist||0,timeStamp:h.timeStamp},b);"mouse"===h.pointerType&&(n="mousemove","pointerdown"===d?n="mousedown":"pointerup"===d&&(n="pointerup"),this.wc(n,h,c),this.cb=h.buttons)}zf(d){this.Lc=d;d=this.gb;if(-1===d.Ia){var h=Date.now(),n=h-d.Lb,l=d.pg;n>=l&&d.Dd?(d.Lb=
h,d.Wa=!0,d.Cc(),d.Wa=!1):d.Ia=self.setTimeout(d.Ud,Math.max(l-n,4))}}Ye(){this.Pa("pointermove",this.Lc);this.Lc=null}zb(d,h){for(let n=0,l=h.changedTouches.length;n<l;++n){const q=h.changedTouches[n];z(this,d,{pointerId:q.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:q.clientX,clientY:q.clientY,pageX:q.pageX,pageY:q.pageY,width:2*(q.radiusX||q.webkitRadiusX||0),height:2*(q.radiusY||q.webkitRadiusY||0),pressure:q.force||q.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,
twist:q.rotationAngle||0,timeStamp:h.timeStamp},b)}}qc(d){window!==window.top&&window.focus();this.sd(d.target)&&document.activeElement&&!this.sd(document.activeElement)&&document.activeElement.blur()}sd(d){return!d||d===document||d===window||d===document.body||"canvas"===d.tagName.toLowerCase()}Pe(){this.Ad||(this.Ad=!0,window.addEventListener("deviceorientation",d=>this.pf(d)),window.addEventListener("deviceorientationabsolute",d=>this.qf(d)))}Oe(){this.zd||(this.zd=!0,window.addEventListener("devicemotion",
d=>this.nf(d)))}pf(d){v(this,"deviceorientation",{absolute:!!d.absolute,alpha:d.alpha||0,beta:d.beta||0,gamma:d.gamma||0,timeStamp:d.timeStamp,webkitCompassHeading:d.webkitCompassHeading,webkitCompassAccuracy:d.webkitCompassAccuracy},b)}qf(d){v(this,"deviceorientationabsolute",{absolute:!!d.absolute,alpha:d.alpha||0,beta:d.beta||0,gamma:d.gamma||0,timeStamp:d.timeStamp},b)}nf(d){let h=null;var n=d.acceleration;n&&(h={x:n.x||0,y:n.y||0,z:n.z||0});n=null;var l=d.accelerationIncludingGravity;l&&(n={x:l.x||
0,y:l.y||0,z:l.z||0});l=null;const q=d.rotationRate;q&&(l={alpha:q.alpha||0,beta:q.beta||0,gamma:q.gamma||0});v(this,"devicemotion",{acceleration:h,accelerationIncludingGravity:n,rotationRate:l,interval:d.interval,timeStamp:d.timeStamp},b)}Hf(d){const h=this.A,n=h.I;n.style.width=d.styleWidth+"px";n.style.height=d.styleHeight+"px";n.style.marginLeft=d.marginLeft+"px";n.style.marginTop=d.marginTop+"px";h.fd();this.Id&&(n.style.display="",this.Id=!1)}uf(d){const h=d.url;d=d.filename;const n=document.createElement("a"),
l=document.body;n.textContent=d;n.href=h;n.download=d;l.appendChild(n);n.click();l.removeChild(n)}async Bf(d){var h=d.imageBitmapOpts;d=await self.C3_RasterSvgImageBlob(d.blob,d.imageWidth,d.imageHeight,d.surfaceWidth,d.surfaceHeight);h=h?await createImageBitmap(d,h):await createImageBitmap(d);return{imageBitmap:h,transferables:[h]}}async tf(d){return await self.C3_GetSvgImageSize(d.blob)}async gf(d){await ba(d.url)}zc(){var d=[...this.Ca];this.Ca.clear();if(!this.la)for(const h of d)(d=h.play())&&
d.catch(()=>{this.Ob.has(h)||this.Ca.add(h)})}qa(d){if("function"!==typeof d.play)throw Error("missing play function");this.Ob.delete(d);let h;try{h=d.play()}catch(n){this.Ca.add(d);return}h&&h.catch(()=>{this.Ob.has(d)||this.Ca.add(d)})}wa(d){this.Ca.delete(d);this.Ob.add(d)}tb(d){this.la=!!d}mf(d){if(d.show){this.sa||(this.sa=document.createElement("div"),this.sa.id="inspectOutline",document.body.appendChild(this.sa));var h=this.sa;h.style.display="";h.style.left=d.left-1+"px";h.style.top=d.top-
1+"px";h.style.width=d.width+2+"px";h.style.height=d.height+2+"px";h.textContent=d.name}else this.sa&&(this.sa.style.display="none")}Cf(){window.C3_RegisterSW&&window.C3_RegisterSW()}ud(d){window.c3_postToMessagePort&&(d.from="runtime",window.c3_postToMessagePort(d))}ef(d,h){return this.A.gd(this.Ra,"js-invoke-function",{name:d,params:h},void 0,void 0)}hf(d){alert(d.message)}})}"use strict";
{const g=document.currentScript.src;self.Ae=class{constructor(a){this.Sb=a;this.V=g?g.substr(0,g.lastIndexOf("/")+1):a.V;this.rg=Math.min(navigator.hardwareConcurrency||2,16);this.Ec=null;this.Jd=[];this.Pc=this.Ic=null}async we(){if(this.og)throw Error("already initialised");this.og=!0;var a=this.Sb.pc("dispatchworker.js");this.Ec=await this.Sb.Yb(a,this.V,{name:"DispatchWorker"});a=new MessageChannel;this.Ic=a.port1;this.Ec.postMessage({type:"_init","in-port":a.port2},[a.port2]);this.Pc=await this.od()}async od(){const a=
this.Jd.length;var b=this.Sb.pc("jobworker.js");b=await this.Sb.Yb(b,this.V,{name:"JobWorker"+a});const c=new MessageChannel,f=new MessageChannel;this.Ec.postMessage({type:"_addJobWorker",port:c.port1},[c.port1]);b.postMessage({type:"init",number:a,"dispatch-port":c.port2,"output-port":f.port2},[c.port2,f.port2]);this.Jd.push(b);return f.port1}ue(){return{inputPort:this.Ic,outputPort:this.Pc,maxNumWorkers:this.rg}}ve(){return[this.Ic,this.Pc]}}}"use strict";
window.C3_IsSupported&&(window.c3_runtimeInterface=new self.Oa({Eg:"undefined"!==typeof OffscreenCanvas,Fg:"workermain.js",Ka:["scripts/c3runtime.js"],Bg:"scripts/",Wc:[],Vd:"html5"}));"use strict";function W(g){13!==g.which&&27!==g.which&&g.stopPropagation()}function X(g){g.stopPropagation()}
self.Oa.lb(class extends self.ne{constructor(g){super(g,"text-input");G(this,"scroll-to-bottom",a=>{a.scrollTop=a.scrollHeight})}ad(g,a){let b;const c=a.type;"textarea"===c?(b=document.createElement("textarea"),b.style.resize="none"):(b=document.createElement("input"),b.type=c);b.style.position="absolute";b.autocomplete="off";b.addEventListener("touchstart",X);b.addEventListener("touchmove",X);b.addEventListener("touchend",X);b.addEventListener("mousedown",X);b.addEventListener("mouseup",X);b.addEventListener("keydown",
W);b.addEventListener("keyup",W);b.addEventListener("click",f=>{f.stopPropagation();H(this,"click",g)});b.addEventListener("dblclick",f=>{f.stopPropagation();H(this,"dblclick",g)});b.addEventListener("input",()=>F(this,"change",g,{text:b.value}));a.id&&(b.id=a.id);this.lc(b,a);return b}lc(g,a){g.value=a.text;g.placeholder=a.placeholder;g.title=a.title;g.disabled=!a.isEnabled;g.readOnly=a.isReadOnly;g.spellcheck=a.spellCheck;a=a.maxLength;0>a?g.removeAttribute("maxlength"):g.setAttribute("maxlength",
a)}});"use strict";async function ca(g,a){a=a.type;let b=!0;0===a?b=await da():1===a&&(b=await ea());v(g,"permission-result",{type:a,result:b})}async function da(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{return"granted"===await self.DeviceOrientationEvent.requestPermission()}catch(g){return console.warn("[Touch] Failed to request orientation permission: ",g),!1}}
async function ea(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{return"granted"===await self.DeviceMotionEvent.requestPermission()}catch(g){return console.warn("[Touch] Failed to request motion permission: ",g),!1}}self.Oa.lb(class extends self.mb{constructor(g){super(g,"touch");A(this,"request-permission",a=>ca(this,a))}});"use strict";
{const g=180/Math.PI;self.da=class extends self.mb{constructor(a){super(a,"audio");this.Hb=this.f=null;this.Jb=this.Hc=!1;this.na=()=>this.kg();this.ba=[];this.C=[];this.ga=null;this.Kd="";this.Ld=-1;this.fb=new Map;this.Mc=1;this.la=!1;this.Tc=0;this.Ub=1;this.Fc=0;this.Nd="HRTF";this.Ed="inverse";this.Od=600;this.Md=1E4;this.Qd=1;this.Gd=this.Qc=!1;this.vg=this.A.ye();this.ca=new Map;this.za=new Set;this.Jc=!1;this.Nc="";this.ta=null;self.C3Audio_OnMicrophoneStream=(b,c)=>this.xf(b,c);this.Gb=null;
self.C3Audio_GetOutputStream=()=>this.sf();self.C3Audio_DOMInterface=this;B(this,[["create-audio-context",b=>this.Ue(b)],["play",b=>this.Kf(b)],["stop",b=>this.gg(b)],["stop-all",()=>this.hg()],["set-paused",b=>this.$f(b)],["set-volume",b=>this.eg(b)],["fade-volume",b=>this.Ze(b)],["set-master-volume",b=>this.Yf(b)],["set-muted",b=>this.Zf(b)],["set-silent",b=>this.bg(b)],["set-looping",b=>this.Xf(b)],["set-playback-rate",b=>this.ag(b)],["seek",b=>this.Rf(b)],["preload",b=>this.Lf(b)],["unload",b=>
this.lg(b)],["unload-all",()=>this.mg()],["set-suspended",b=>this.cg(b)],["add-effect",b=>this.md(b)],["set-effect-param",b=>this.Uf(b)],["remove-effects",b=>this.Nf(b)],["tick",b=>this.Gf(b)],["load-state",b=>this.vf(b)]])}async Ue(a){a.isiOSCordova&&(this.Qc=!0);this.Tc=a.timeScaleMode;this.Nd=["equalpower","HRTF","soundfield"][a.panningModel];this.Ed=["linear","inverse","exponential"][a.distanceModel];this.Od=a.refDistance;this.Md=a.maxDistance;this.Qd=a.rolloffFactor;var b={latencyHint:a.latencyHint};
if("undefined"!==typeof AudioContext)this.f=new AudioContext(b);else if("undefined"!==typeof webkitAudioContext)this.f=new webkitAudioContext(b);else throw Error("Web Audio API not supported");this.nd();this.f.onstatechange=()=>{"running"!==this.f.state&&this.nd()};this.Hb=this.f.createGain();this.Hb.connect(this.f.destination);b=a.listenerPos;this.f.listener.setPosition(b[0],b[1],b[2]);this.f.listener.setOrientation(0,0,1,0,-1,0);self.C3_GetAudioContextCurrentTime=()=>this.Zb();try{await Promise.all(a.preloadList.map(c=>
this.vb(c.originalUrl,c.url,c.type,!1)))}catch(c){console.error("[Construct 3] Preloading sounds failed: ",c)}return{sampleRate:this.f.sampleRate}}nd(){this.Jb||(this.Hc=!1,window.addEventListener("pointerup",this.na,!0),window.addEventListener("touchend",this.na,!0),window.addEventListener("click",this.na,!0),window.addEventListener("keydown",this.na,!0),this.Jb=!0)}We(){this.Jb&&(this.Hc=!0,window.removeEventListener("pointerup",this.na,!0),window.removeEventListener("touchend",this.na,!0),window.removeEventListener("click",
this.na,!0),window.removeEventListener("keydown",this.na,!0),this.Jb=!1)}kg(){if(!this.Hc){var a=this.f;"suspended"===a.state&&a.resume&&a.resume();var b=a.createBuffer(1,220,22050),c=a.createBufferSource();c.buffer=b;c.connect(a.destination);c.start(0);"running"===a.state&&this.We()}}U(){return this.f}Zb(){return this.f.currentTime}oa(){return this.Hb}cd(a){return(a=this.ca.get(a.toLowerCase()))?a[0].N():this.oa()}Xd(a,b){a=a.toLowerCase();let c=this.ca.get(a);c||(c=[],this.ca.set(a,c));b.Wf(c.length);
b.dg(a);c.push(b);this.xd(a)}xd(a){let b=this.oa();const c=this.ca.get(a);if(c&&c.length){b=c[0].N();for(let f=0,p=c.length;f<p;++f){const t=c[f];f+1===p?t.P(this.oa()):t.P(c[f+1].N())}}for(const f of this.ja(a))f.Fe(b);this.ta&&this.Nc===a&&(this.ta.disconnect(),this.ta.connect(b))}ob(){return this.Mc}pb(){return this.la}Vf(){this.Gd=!0}pe(a,b){return b?this.A.ng(a).then(c=>{const f=this.f.createBuffer(1,c.length,48E3);f.getChannelData(0).set(c);return f}):new Promise((c,f)=>{this.f.decodeAudioData(a,
c,f)})}qa(a){this.A.qa(a)}wa(a){this.A.wa(a)}hd(a){let b=0;for(let c=0,f=this.C.length;c<f;++c){const p=this.C[c];this.C[b]=p;p.J===a?p.c():++b}this.C.length=b}Ge(){let a=0;for(let b=0,c=this.ba.length;b<c;++b){const f=this.ba[b];this.ba[a]=f;f.pa()?f.c():++a}this.ba.length=a}*ja(a){if(a)for(const b of this.C)self.da.qe(b.$,a)&&(yield b);else this.ga&&!this.ga.R()&&(yield this.ga)}async vb(a,b,c,f,p){for(const t of this.ba)if(t.Ma()===b)return await Y(t),t;if(p)return null;f&&(this.Qc||this.Gd)&&
this.Ge();p="audio/webm; codecs=opus"===c&&!this.vg;f&&p&&this.Vf();a=!f||this.Qc||p?new self.ke(this,a,b,c,f,p):new self.ie(this,a,b,c,f);this.ba.push(a);await Y(a);return a}async oc(a,b,c,f,p){for(const t of this.C)if(t.Ma()===b&&(t.Wb()||p))return t.Ie(f),t;a=await this.vb(a,b,c,p);f="html5"===a.Bc?new self.je(a.i,a,f):new self.le(a.i,a,f);this.C.push(f);return f}Me(a){let b=this.fb.get(a);if(!b){let c=null;b={Vc:0,promise:new Promise(f=>c=f),resolve:c};this.fb.set(a,b)}b.Vc++}Of(a){const b=this.fb.get(a);
if(!b)throw Error("expected pending tag");b.Vc--;0===b.Vc&&(b.resolve(),this.fb.delete(a))}kc(a){a||(a=this.Kd);return(a=this.fb.get(a))?a.promise:Promise.resolve()}yb(){if(0<this.za.size)C(this);else for(const a of this.C)if(a.dd()){C(this);break}}xa(){for(var a of this.za)a.xa();a=this.Zb();for(var b of this.C)b.xa(a);b=this.C.filter(c=>c.dd()).map(c=>c.La());v(this,"state",{tickCount:this.Ld,audioInstances:b,analysers:[...this.za].map(c=>c.se())});0===b.length&&0===this.za.size&&this.Kb&&(this.A.Pf(this.Td),
this.Kb=!1)}fc(a,b,c){v(this,"trigger",{type:a,tag:b,aiid:c})}async Kf(a){const b=a.originalUrl,c=a.url,f=a.type,p=a.isMusic,t=a.tag,d=a.isLooping,h=a.vol,n=a.pos,l=a.panning;let q=a.off;0<q&&!a.trueClock&&(this.f.getOutputTimestamp?(a=this.f.getOutputTimestamp(),q=q-a.performanceTime/1E3+a.contextTime):q=q-performance.now()/1E3+this.f.currentTime);this.Kd=t;this.Me(t);try{this.ga=await this.oc(b,c,f,t,p),l?(this.ga.sb(!0),this.ga.He(l.x,l.y,l.angle,l.innerAngle,l.outerAngle,l.outerGain),l.hasOwnProperty("uid")&&
this.ga.Je(l.uid)):this.ga.sb(!1),this.ga.Play(d,h,n,q)}catch(e){console.error("[Construct 3] Audio: error starting playback: ",e);return}finally{this.Of(t)}C(this)}gg(a){a=a.tag;for(const b of this.ja(a))b.ka()}hg(){for(const a of this.C)a.ka()}$f(a){const b=a.tag;a=a.paused;for(const c of this.ja(b))a?c.Na():c.rb();this.yb()}eg(a){const b=a.tag;a=a.vol;for(const c of this.ja(b))c.ub(a)}async Ze(a){const b=a.tag,c=a.vol,f=a.duration;a=a.stopOnEnd;await this.kc(b);for(const p of this.ja(b))p.re(c,
f,a);this.yb()}Yf(a){this.Mc=a.vol;for(const b of this.C)b.Db()}Zf(a){const b=a.tag;a=a.isMuted;for(const c of this.ja(b))c.jd(a)}bg(a){this.la=a.isSilent;this.A.tb(this.la);for(const b of this.C)b.Cb()}Xf(a){const b=a.tag;a=a.isLooping;for(const c of this.ja(b))c.ic(a)}async ag(a){const b=a.tag;a=a.rate;await this.kc(b);for(const c of this.ja(b))c.ld(a)}async Rf(a){const b=a.tag;a=a.pos;await this.kc(b);for(const c of this.ja(b))c.hc(a)}async Lf(a){const b=a.originalUrl,c=a.url,f=a.type;a=a.isMusic;
try{await this.oc(b,c,f,"",a)}catch(p){console.error("[Construct 3] Audio: error preloading: ",p)}}async lg(a){if(a=await this.vb("",a.url,a.type,a.isMusic,!0))a.c(),a=this.ba.indexOf(a),-1!==a&&this.ba.splice(a,1)}mg(){for(const a of this.ba)a.c();this.ba.length=0}cg(a){a=a.isSuspended;!a&&this.f.resume&&this.f.resume();for(const b of this.C)b.jc(a);a&&this.f.suspend&&this.f.suspend()}Gf(a){this.Ub=a.timeScale;this.Fc=a.gameTime;this.Ld=a.tickCount;if(0!==this.Tc)for(var b of this.C)b.ya();(b=a.listenerPos)&&
this.f.listener.setPosition(b[0],b[1],b[2]);for(const c of a.instPans){a=c.uid;for(const f of this.C)f.fa===a&&f.kd(c.x,c.y,c.angle)}}async md(a){var b=a.type;const c=a.tag;var f=a.params;if("filter"===b)f=new self.ce(this,...f);else if("delay"===b)f=new self.ae(this,...f);else if("convolution"===b){b=null;try{b=await this.vb(a.bufferOriginalUrl,a.bufferUrl,a.bufferType,!1)}catch(p){console.log("[Construct 3] Audio: error loading convolution: ",p);return}f=new self.$d(this,b.aa,...f);f.Sf(a.bufferOriginalUrl,
a.bufferType)}else if("flanger"===b)f=new self.de(this,...f);else if("phaser"===b)f=new self.fe(this,...f);else if("gain"===b)f=new self.ee(this,...f);else if("tremolo"===b)f=new self.he(this,...f);else if("ringmod"===b)f=new self.ge(this,...f);else if("distortion"===b)f=new self.be(this,...f);else if("compressor"===b)f=new self.Zd(this,...f);else if("analyser"===b)f=new self.Yd(this,...f);else throw Error("invalid effect type");this.Xd(c,f);this.wd()}Uf(a){const b=a.index,c=a.param,f=a.value,p=a.ramp,
t=a.time;a=this.ca.get(a.tag);!a||0>b||b>=a.length||(a[b].X(c,f,p,t),this.wd())}Nf(a){a=a.tag.toLowerCase();const b=this.ca.get(a);if(b&&b.length){for(const c of b)c.c();this.ca.delete(a);this.xd(a)}}Le(a){this.za.add(a);this.yb()}Mf(a){this.za.delete(a)}wd(){this.Jc||(this.Jc=!0,Promise.resolve().then(()=>this.Xe()))}Xe(){const a={};for(const [b,c]of this.ca)a[b]=c.map(f=>f.La());v(this,"fxstate",{fxstate:a});this.Jc=!1}async vf(a){const b=a.saveLoadMode;if(3!==b)for(var c of this.C)c.pa()&&1===
b||(c.pa()||2!==b)&&c.ka();for(const f of this.ca.values())for(const p of f)p.c();this.ca.clear();this.Ub=a.timeScale;this.Fc=a.gameTime;c=a.listenerPos;this.f.listener.setPosition(c[0],c[1],c[2]);this.la=a.isSilent;this.A.tb(this.la);this.Mc=a.masterVolume;c=[];for(const f of Object.values(a.effects))c.push(Promise.all(f.map(p=>this.md(p))));await Promise.all(c);await Promise.all(a.playing.map(f=>this.ff(f,b)));this.yb()}async ff(a,b){if(3!==b){var c=a.bufferOriginalUrl,f=a.bufferUrl,p=a.bufferType,
t=a.isMusic,d=a.tag,h=a.isLooping,n=a.volume,l=a.playbackTime;if(!t||1!==b)if(t||2!==b){b=null;try{b=await this.oc(c,f,p,d,t)}catch(q){console.error("[Construct 3] Audio: error loading audio state: ",q);return}b.De(a.pan);b.Play(h,n,l,0);a.isPlaying||b.Na();b.sc(a)}}}xf(a,b){this.ta&&this.ta.disconnect();this.Nc=b.toLowerCase();this.ta=this.f.createMediaStreamSource(a);this.ta.connect(this.cd(this.Nc))}sf(){this.Gb||(this.Gb=this.f.createMediaStreamDestination(),this.Hb.connect(this.Gb));return this.Gb.stream}static qe(a,
b){return a.length!==b.length?!1:a===b?!0:a.toLowerCase()===b.toLowerCase()}static Ke(a){return a*g}static oe(a){return Math.pow(10,a/20)}static bd(a){return Math.max(Math.min(self.da.oe(a),1),0)}static Ce(a){return Math.log(a)/Math.log(10)*20}static Be(a){return self.da.Ce(Math.max(Math.min(a,1),0))}static xg(a,b){return 1-Math.exp(-b*a)}};self.Oa.lb(self.da)}"use strict";function Y(g){g.Mb||(g.Mb=g.rc());return g.Mb}
self.Yc=class{constructor(g,a,b,c,f){this.i=g;this.tg=a;this.ua=b;this.O=c;this.qg=f;this.Bc="";this.Mb=null}c(){this.Mb=this.i=null}rc(){}U(){return this.i.U()}ac(){return this.tg}Ma(){return this.ua}$b(){return this.O}pa(){return this.qg}ea(){}};"use strict";
self.ie=class extends self.Yc{constructor(g,a,b,c,f){super(g,a,b,c,f);this.Bc="html5";this.H=new Audio;this.H.crossOrigin="anonymous";this.H.autoplay=!1;this.H.preload="auto";this.Za=this.$a=null;this.H.addEventListener("canplaythrough",()=>!0);this.eb=this.U().createGain();this.bb=null;this.H.addEventListener("canplay",()=>{this.$a&&(this.$a(),this.Za=this.$a=null);!this.bb&&this.H&&(this.bb=this.U().createMediaElementSource(this.H),this.bb.connect(this.eb))});this.onended=null;this.H.addEventListener("ended",
()=>{if(this.onended)this.onended()});this.H.addEventListener("error",p=>{console.error(`[Construct 3] Audio '${this.ua}' error: `,p);this.Za&&(this.Za(p),this.Za=this.$a=null)})}c(){this.i.hd(this);this.eb.disconnect();this.eb=null;this.bb.disconnect();this.bb=null;this.H&&!this.H.paused&&this.H.pause();this.H=this.onended=null;super.c()}rc(){return new Promise((g,a)=>{this.$a=g;this.Za=a;this.H.src=this.ua})}M(){return this.H}ea(){return this.H.duration}};"use strict";
async function fa(g){if(g.ra)return g.ra;var a=g.i.A;if("cordova"===a.W&&a.ze(g.ua)&&"file:"===location.protocol)g.ra=await a.Xb(g.ua);else{a=await fetch(g.ua);if(!a.ok)throw Error(`error fetching audio data: ${a.status} ${a.statusText}`);g.ra=await a.arrayBuffer()}}async function ha(g){if(g.aa)return g.aa;g.aa=await g.i.pe(g.ra,g.sg);g.ra=null}
self.ke=class extends self.Yc{constructor(g,a,b,c,f,p){super(g,a,b,c,f);this.Bc="webaudio";this.aa=this.ra=null;this.sg=!!p}c(){this.i.hd(this);this.aa=this.ra=null;super.c()}async rc(){try{await fa(this),await ha(this)}catch(g){console.error(`[Construct 3] Failed to load audio '${this.ua}': `,g)}}ea(){return this.aa?this.aa.duration:0}};"use strict";
{let g=0;self.Zc=class{constructor(a,b,c){this.i=a;this.J=b;this.$=c;this.Eb=g++;this.K=this.U().createGain();this.K.connect(this.oa());this.v=null;this.Xa=!1;this.F=!0;this.T=this.ia=this.D=!1;this.ib=1;this.Aa=!1;this.Z=1;a=this.i.Tc;this.Kc=1===a&&!this.pa()||2===a;this.Ua=this.fa=-1;this.Sd=!1}c(){this.J=this.i=null;this.v&&(this.v.disconnect(),this.v=null);this.K.disconnect();this.K=null}U(){return this.i.U()}oa(){return this.i.cd(this.$)}ob(){return this.i.ob()}nb(){return this.Kc?this.i.Fc:
performance.now()/1E3}ac(){return this.J.ac()}Ma(){return this.J.Ma()}$b(){return this.J.$b()}pa(){return this.J.pa()}Ie(a){this.$=a}R(){}Wb(){}IsPlaying(){return!this.F&&!this.D&&!this.R()}dd(){return!this.F&&!this.R()}va(){}ea(){return this.J.ea()}Play(){}ka(){}Na(){}rb(){}ub(a){this.ib=a;this.K.gain.cancelScheduledValues(0);this.Ua=-1;this.K.gain.value=this.bc()}re(a,b,c){if(!this.Aa){a*=this.ob();var f=this.K.gain;f.cancelScheduledValues(0);var p=this.i.Zb();b=p+b;f.setValueAtTime(f.value,p);
f.linearRampToValueAtTime(a,b);this.ib=a;this.Ua=b;this.Sd=c}}Db(){this.ub(this.ib)}xa(a){-1!==this.Ua&&a>=this.Ua&&(this.Ua=-1,this.Sd&&this.ka(),this.i.fc("fade-ended",this.$,this.Eb))}bc(){const a=this.ib*this.ob();return isFinite(a)?a:0}jd(a){a=!!a;this.Aa!==a&&(this.Aa=a,this.Cb())}pb(){return this.i.pb()}Cb(){}ic(){}ld(a){this.Z!==a&&(this.Z=a,this.ya())}ya(){}hc(){}jc(){}sb(a){a=!!a;this.Xa!==a&&((this.Xa=a)?(this.v||(this.v=this.U().createPanner(),this.v.panningModel=this.i.Nd,this.v.distanceModel=
this.i.Ed,this.v.refDistance=this.i.Od,this.v.maxDistance=this.i.Md,this.v.rolloffFactor=this.i.Qd),this.K.disconnect(),this.K.connect(this.v),this.v.connect(this.oa())):(this.v.disconnect(),this.K.disconnect(),this.K.connect(this.oa())))}He(a,b,c,f,p,t){this.Xa&&(this.kd(a,b,c),a=self.da.Ke,this.v.coneInnerAngle=a(f),this.v.coneOuterAngle=a(p),this.v.coneOuterGain=t)}kd(a,b,c){this.Xa&&(this.v.setPosition(a,b,0),this.v.setOrientation(Math.cos(c),Math.sin(c),0))}Je(a){this.fa=a}cc(){}Fe(a){const b=
this.v||this.K;b.disconnect();b.connect(a)}La(){return{aiid:this.Eb,tag:this.$,duration:this.ea(),volume:this.ib,isPlaying:this.IsPlaying(),playbackTime:this.va(),playbackRate:this.Z,uid:this.fa,bufferOriginalUrl:this.ac(),bufferUrl:"",bufferType:this.$b(),isMusic:this.pa(),isLooping:this.T,isMuted:this.Aa,resumePosition:this.cc(),pan:this.te()}}sc(a){this.ld(a.playbackRate);this.jd(a.isMuted)}te(){if(!this.v)return null;const a=this.v;return{pos:[a.positionX.value,a.positionY.value,a.positionZ.value],
orient:[a.orientationX.value,a.orientationY.value,a.orientationZ.value],cia:a.coneInnerAngle,coa:a.coneOuterAngle,cog:a.coneOuterGain,uid:this.fa}}De(a){a?(this.sb(!0),a=this.v,a.setPosition(...a.pos),a.setOrientation(...a.orient),a.coneInnerAngle=a.cia,a.coneOuterAngle=a.coa,a.coneOuterGain=a.cog,this.fa=a.uid):this.sb(!1)}}}"use strict";
self.je=class extends self.Zc{constructor(g,a,b){super(g,a,b);this.J.eb.connect(this.K);this.J.onended=()=>this.tc()}c(){this.ka();this.J.eb.disconnect();super.c()}M(){return this.J.M()}tc(){this.F=!0;this.fa=-1;this.i.fc("ended",this.$,this.Eb)}R(){return this.M().ended}Wb(){return this.F?!0:this.R()}va(g){let a=this.M().currentTime;g&&(a*=this.Z);this.T||(a=Math.min(a,this.ea()));return a}Play(g,a,b){const c=this.M();1!==c.playbackRate&&(c.playbackRate=1);c.loop!==g&&(c.loop=g);this.ub(a);c.muted&&
(c.muted=!1);if(c.currentTime!==b)try{c.currentTime=b}catch(f){console.warn(`[Construct 3] Exception seeking audio '${this.J.Ma()}' to position '${b}': `,f)}this.i.qa(c);this.D=this.F=!1;this.T=g;this.Z=1}ka(){const g=this.M();g.paused||g.pause();this.i.wa(g);this.F=!0;this.D=!1;this.fa=-1}Na(){if(!(this.D||this.F||this.R())){var g=this.M();g.paused||g.pause();this.i.wa(g);this.D=!0}}rb(){!this.D||this.F||this.R()||(this.i.qa(this.M()),this.D=!1)}Cb(){this.M().muted=this.Aa||this.pb()}ic(g){g=!!g;
this.T!==g&&(this.T=g,this.M().loop=g)}ya(){let g=this.Z;this.Kc&&(g*=this.i.Ub);try{this.M().playbackRate=g}catch(a){console.warn(`[Construct 3] Unable to set playback rate '${g}':`,a)}}hc(g){if(!this.F&&!this.R())try{this.M().currentTime=g}catch(a){console.warn(`[Construct 3] Error seeking audio to '${g}': `,a)}}cc(){return this.va()}jc(g){g?this.IsPlaying()?(this.M().pause(),this.ia=!0):this.ia=!1:this.ia&&(this.i.qa(this.M()),this.ia=!1)}};"use strict";
function Z(g){g.j&&g.j.disconnect();g.j=null;g.Qa=null}
self.le=class extends self.Zc{constructor(g,a,b){super(g,a,b);this.j=null;this.Pb=c=>this.tc(c);this.Gc=!0;this.Qa=null;this.L=this.Tb=0;this.Oc=1}c(){this.ka();Z(this);this.Pb=null;super.c()}tc(g){this.D||this.ia||g.target!==this.Qa||(this.F=this.Gc=!0,this.fa=-1,Z(this),this.i.fc("ended",this.$,this.Eb))}R(){return!this.F&&this.j&&this.j.loop||this.D?!1:this.Gc}Wb(){return!this.j||this.F?!0:this.R()}va(g){let a;a=this.D?this.L:this.nb()-this.Tb;g&&(a*=this.Z);this.T||(a=Math.min(a,this.ea()));return a}Play(g,
a,b,c){this.Oc=1;this.ub(a);Z(this);this.j=this.U().createBufferSource();this.j.buffer=this.J.aa;this.j.connect(this.K);this.Qa=this.j;this.j.onended=this.Pb;this.j.loop=g;this.j.start(c,b);this.D=this.F=this.Gc=!1;this.T=g;this.Z=1;this.Tb=this.nb()-b}ka(){if(this.j)try{this.j.stop(0)}catch(g){}this.F=!0;this.D=!1;this.fa=-1}Na(){this.D||this.F||this.R()||(this.L=this.va(!0),this.T&&(this.L%=this.ea()),this.D=!0,this.j.stop(0))}rb(){!this.D||this.F||this.R()||(Z(this),this.j=this.U().createBufferSource(),
this.j.buffer=this.J.aa,this.j.connect(this.K),this.Qa=this.j,this.j.onended=this.Pb,this.j.loop=this.T,this.Db(),this.ya(),this.Tb=this.nb()-this.L/(this.Z||.001),this.j.start(0,this.L),this.D=!1)}bc(){return super.bc()*this.Oc}Cb(){this.Oc=this.Aa||this.pb()?0:1;this.Db()}ic(g){g=!!g;this.T!==g&&(this.T=g,this.j&&(this.j.loop=g))}ya(){let g=this.Z;this.Kc&&(g*=this.i.Ub);this.j&&(this.j.playbackRate.value=g)}hc(g){this.F||this.R()||(this.D?this.L=g:(this.Na(),this.L=g,this.rb()))}cc(){return this.L}jc(g){g?
this.IsPlaying()?(this.ia=!0,this.L=this.va(!0),this.T&&(this.L%=this.ea()),this.j.stop(0)):this.ia=!1:this.ia&&(Z(this),this.j=this.U().createBufferSource(),this.j.buffer=this.J.aa,this.j.connect(this.K),this.Qa=this.j,this.j.onended=this.Pb,this.j.loop=this.T,this.Db(),this.ya(),this.Tb=this.nb()-this.L/(this.Z||.001),this.j.start(0,this.L),this.ia=!1)}sc(g){super.sc(g);this.L=g.resumePosition}};"use strict";
{class g{constructor(a){this.i=a;this.f=a.U();this.Hd=-1;this.O=this.$="";this.g=null}c(){this.f=null}Wf(a){this.Hd=a}dg(a){this.$=a}o(){return this.f.createGain()}N(){}P(){}m(a,b,c,f){a.cancelScheduledValues(0);if(0===f)a.value=b;else{var p=this.f.currentTime;f+=p;switch(c){case 0:a.setValueAtTime(b,f);break;case 1:a.setValueAtTime(a.value,p);a.linearRampToValueAtTime(b,f);break;case 2:a.setValueAtTime(a.value,p),a.exponentialRampToValueAtTime(b,f)}}}La(){return{type:this.O,tag:this.$,params:this.g}}}
self.ce=class extends g{constructor(a,b,c,f,p,t,d){super(a);this.O="filter";this.g=[b,c,f,p,t,d];this.l=this.o();this.b=this.o();this.b.gain.value=d;this.a=this.o();this.a.gain.value=1-d;this.u=this.f.createBiquadFilter();this.u.type=b;this.u.frequency.value=c;this.u.detune.value=f;this.u.Q.value=p;this.u.gain.vlaue=t;this.l.connect(this.u);this.l.connect(this.a);this.u.connect(this.b)}c(){this.l.disconnect();this.u.disconnect();this.b.disconnect();this.a.disconnect();super.c()}P(a){this.b.disconnect();
this.b.connect(a);this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[5]=b;this.m(this.b.gain,b,c,f);this.m(this.a.gain,1-b,c,f);break;case 1:this.g[1]=b;this.m(this.u.frequency,b,c,f);break;case 2:this.g[2]=b;this.m(this.u.detune,b,c,f);break;case 3:this.g[3]=b;this.m(this.u.Q,b,c,f);break;case 4:this.g[4]=b,this.m(this.u.gain,b,c,f)}}};self.ae=class extends g{constructor(a,b,c,f){super(a);this.O="delay";this.g=[b,c,f];this.l=
this.o();this.b=this.o();this.b.gain.value=f;this.a=this.o();this.a.gain.value=1-f;this.ab=this.o();this.S=this.f.createDelay(b);this.S.delayTime.value=b;this.Ta=this.o();this.Ta.gain.value=c;this.l.connect(this.ab);this.l.connect(this.a);this.ab.connect(this.b);this.ab.connect(this.S);this.S.connect(this.Ta);this.Ta.connect(this.ab)}c(){this.l.disconnect();this.b.disconnect();this.a.disconnect();this.ab.disconnect();this.S.disconnect();this.Ta.disconnect();super.c()}P(a){this.b.disconnect();this.b.connect(a);
this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,b,c,f){const p=self.da.bd;switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[2]=b;this.m(this.b.gain,b,c,f);this.m(this.a.gain,1-b,c,f);break;case 4:this.g[1]=p(b);this.m(this.Ta.gain,p(b),c,f);break;case 5:this.g[0]=b,this.m(this.S.delayTime,b,c,f)}}};self.$d=class extends g{constructor(a,b,c,f){super(a);this.O="convolution";this.g=[c,f];this.Cd=this.Bd="";this.l=this.o();this.b=this.o();this.b.gain.value=f;this.a=this.o();this.a.gain.value=
1-f;this.Sa=this.f.createConvolver();this.Sa.normalize=c;this.Sa.buffer=b;this.l.connect(this.Sa);this.l.connect(this.a);this.Sa.connect(this.b)}c(){this.l.disconnect();this.Sa.disconnect();this.b.disconnect();this.a.disconnect();super.c()}P(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0),this.g[1]=b,this.m(this.b.gain,b,c,f),this.m(this.a.gain,1-b,c,f)}}Sf(a,b){this.Bd=a;this.Cd=b}La(){const a=
super.La();a.bufferOriginalUrl=this.Bd;a.bufferUrl="";a.bufferType=this.Cd;return a}};self.de=class extends g{constructor(a,b,c,f,p,t){super(a);this.O="flanger";this.g=[b,c,f,p,t];this.l=this.o();this.a=this.o();this.a.gain.value=1-t/2;this.b=this.o();this.b.gain.value=t/2;this.Va=this.o();this.Va.gain.value=p;this.S=this.f.createDelay(b+c);this.S.delayTime.value=b;this.s=this.f.createOscillator();this.s.frequency.value=f;this.G=this.o();this.G.gain.value=c;this.l.connect(this.S);this.l.connect(this.a);
this.S.connect(this.b);this.S.connect(this.Va);this.Va.connect(this.S);this.s.connect(this.G);this.G.connect(this.S.delayTime);this.s.start(0)}c(){this.s.stop(0);this.l.disconnect();this.S.disconnect();this.s.disconnect();this.G.disconnect();this.a.disconnect();this.b.disconnect();this.Va.disconnect();super.c()}P(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[4]=b;this.m(this.b.gain,
b/2,c,f);this.m(this.a.gain,1-b/2,c,f);break;case 6:this.g[1]=b/1E3;this.m(this.G.gain,b/1E3,c,f);break;case 7:this.g[2]=b;this.m(this.s.frequency,b,c,f);break;case 8:this.g[3]=b/100,this.m(this.Va.gain,b/100,c,f)}}};self.fe=class extends g{constructor(a,b,c,f,p,t,d){super(a);this.O="phaser";this.g=[b,c,f,p,t,d];this.l=this.o();this.a=this.o();this.a.gain.value=1-d/2;this.b=this.o();this.b.gain.value=d/2;this.u=this.f.createBiquadFilter();this.u.type="allpass";this.u.frequency.value=b;this.u.detune.value=
c;this.u.Q.value=f;this.s=this.f.createOscillator();this.s.frequency.value=t;this.G=this.o();this.G.gain.value=p;this.l.connect(this.u);this.l.connect(this.a);this.u.connect(this.b);this.s.connect(this.G);this.G.connect(this.u.frequency);this.s.start(0)}c(){this.s.stop(0);this.l.disconnect();this.u.disconnect();this.s.disconnect();this.G.disconnect();this.a.disconnect();this.b.disconnect();super.c()}P(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,
b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[5]=b;this.m(this.b.gain,b/2,c,f);this.m(this.a.gain,1-b/2,c,f);break;case 1:this.g[0]=b;this.m(this.u.frequency,b,c,f);break;case 2:this.g[1]=b;this.m(this.u.detune,b,c,f);break;case 3:this.g[2]=b;this.m(this.u.Q,b,c,f);break;case 6:this.g[3]=b;this.m(this.G.gain,b,c,f);break;case 7:this.g[4]=b,this.m(this.s.frequency,b,c,f)}}};self.ee=class extends g{constructor(a,b){super(a);this.O="gain";this.g=[b];this.h=this.o();this.h.gain.value=
b}c(){this.h.disconnect();super.c()}P(a){this.h.disconnect();this.h.connect(a)}N(){return this.h}X(a,b,c,f){const p=self.da.bd;switch(a){case 4:this.g[0]=p(b),this.m(this.h.gain,p(b),c,f)}}};self.he=class extends g{constructor(a,b,c){super(a);this.O="tremolo";this.g=[b,c];this.h=this.o();this.h.gain.value=1-c/2;this.s=this.f.createOscillator();this.s.frequency.value=b;this.G=this.o();this.G.gain.value=c/2;this.s.connect(this.G);this.G.connect(this.h.gain);this.s.start(0)}c(){this.s.stop(0);this.s.disconnect();
this.G.disconnect();this.h.disconnect();super.c()}P(a){this.h.disconnect();this.h.connect(a)}N(){return this.h}X(a,b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[1]=b;this.m(this.h.gain.value,1-b/2,c,f);this.m(this.G.gain.value,b/2,c,f);break;case 7:this.g[0]=b,this.m(this.s.frequency,b,c,f)}}};self.ge=class extends g{constructor(a,b,c){super(a);this.O="ringmod";this.g=[b,c];this.l=this.o();this.b=this.o();this.b.gain.value=c;this.a=this.o();this.a.gain.value=1-c;this.hb=this.o();
this.hb.gain.value=0;this.s=this.f.createOscillator();this.s.frequency.value=b;this.s.connect(this.hb.gain);this.s.start(0);this.l.connect(this.hb);this.l.connect(this.a);this.hb.connect(this.b)}c(){this.s.stop(0);this.s.disconnect();this.hb.disconnect();this.l.disconnect();this.b.disconnect();this.a.disconnect();super.c()}P(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[1]=b;this.m(this.b.gain,
b,c,f);this.m(this.a.gain,1-b,c,f);break;case 7:this.g[0]=b,this.m(this.s.frequency,b,c,f)}}};self.be=class extends g{constructor(a,b,c,f,p,t){super(a);this.O="distortion";this.g=[b,c,f,p,t];this.l=this.o();this.Rb=this.o();this.Qb=this.o();this.Tf(f,p);this.b=this.o();this.b.gain.value=t;this.a=this.o();this.a.gain.value=1-t;this.Vb=this.f.createWaveShaper();this.Dc=new Float32Array(65536);this.af(b,c);this.Vb.curve=this.Dc;this.l.connect(this.Rb);this.l.connect(this.a);this.Rb.connect(this.Vb);
this.Vb.connect(this.Qb);this.Qb.connect(this.b)}c(){this.l.disconnect();this.Rb.disconnect();this.Vb.disconnect();this.Qb.disconnect();this.b.disconnect();this.a.disconnect();super.c()}Tf(a,b){.01>a&&(a=.01);this.Rb.gain.value=a;this.Qb.gain.value=Math.pow(1/a,.6)*b}af(a,b){for(let c=0;32768>c;++c){let f=c/32768;f=this.fg(f,a,b);this.Dc[32768+c]=f;this.Dc[32768-c-1]=-f}}fg(a,b,c){c=1.05*c*b-b;const f=0>a?-a:a;return(f<b?f:b+c*self.da.xg(f-b,1/c))*(0>a?-1:1)}P(a){this.b.disconnect();this.b.connect(a);
this.a.disconnect();this.a.connect(a)}N(){return this.l}X(a,b,c,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0),this.g[4]=b,this.m(this.b.gain,b,c,f),this.m(this.a.gain,1-b,c,f)}}};self.Zd=class extends g{constructor(a,b,c,f,p,t){super(a);this.O="compressor";this.g=[b,c,f,p,t];this.h=this.f.createDynamicsCompressor();this.h.threshold.value=b;this.h.knee.value=c;this.h.ratio.value=f;this.h.attack.value=p;this.h.release.value=t}c(){this.h.disconnect();super.c()}P(a){this.h.disconnect();this.h.connect(a)}N(){return this.h}X(){}};
self.Yd=class extends g{constructor(a,b,c){super(a);this.O="analyser";this.g=[b,c];this.h=this.f.createAnalyser();this.h.fftSize=b;this.h.smoothingTimeConstant=c;this.Fd=new Float32Array(this.h.frequencyBinCount);this.Rd=new Uint8Array(b);this.Pd=this.Da=0;this.i.Le(this)}c(){this.i.Mf(this);this.h.disconnect();super.c()}xa(){this.h.getFloatFrequencyData(this.Fd);this.h.getByteTimeDomainData(this.Rd);const a=this.h.fftSize;let b=this.Da=0;for(var c=0;c<a;++c){let f=(this.Rd[c]-128)/128;0>f&&(f=-f);
this.Da<f&&(this.Da=f);b+=f*f}c=self.da.Be;this.Da=c(this.Da);this.Pd=c(Math.sqrt(b/a))}P(a){this.h.disconnect();this.h.connect(a)}N(){return this.h}X(){}se(){return{tag:this.$,index:this.Hd,peak:this.Da,rms:this.Pd,binCount:this.h.frequencyBinCount,freqBins:this.Fd}}}};